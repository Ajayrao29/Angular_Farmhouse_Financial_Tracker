<div class="container mt-4">
  <h2>Financial Reports</h2>
  
  <div class="row mt-3">
    <div class="col-md-6">
      <app-property-selector (propertyChanged)="onPropertyChange($event)"></app-property-selector>
    </div>
    
    <div class="col-md-6">
      <label for="periodSelect" class="form-label">Report Period:</label>
      <select id="periodSelect" class="form-select" [(ngModel)]="selectedPeriod" (change)="onPeriodChange()">
        <option value="monthly">Monthly</option>
        <option value="quarterly">Quarterly</option>
        <option value="yearly">Yearly</option>
      </select>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-4">
      <div class="card border-success">
        <div class="card-body">
          <h5 class="card-title text-success">Total Income</h5>
          <h3>₹{{ totalIncome | number }}</h3>
        </div>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="card border-danger">
        <div class="card-body">
          <h5 class="card-title text-danger">Total Expense</h5>
          <h3>₹{{ totalExpense | number }}</h3>
        </div>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="card" [ngClass]="netProfit >= 0 ? 'border-primary' : 'border-warning'">
        <div class="card-body">
          <h5 class="card-title" [ngClass]="netProfit >= 0 ? 'text-primary' : 'text-warning'">Net Profit</h5>
          <h3>₹{{ netProfit | number }}</h3>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-4">
    <button class="btn btn-success" (click)="exportReport()">Export Report (CSV)</button>
    <a routerLink="/dashboard" class="btn btn-secondary ms-2">Back to Dashboard</a>
  </div>

  <div class="mt-4">
    <h4>Transaction Details</h4>
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Category</th>
            <th>Amount</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let transaction of filteredTransactions">
            <td>{{ transaction.date | date }}</td>
            <td>
              <span class="badge" [ngClass]="transaction.type === 'income' ? 'bg-success' : 'bg-danger'">
                {{ transaction.type | uppercase }}
              </span>
            </td>
            <td>{{ transaction.category }}</td>
            <td>₹{{ transaction.amount | number }}</td>
            <td>{{ transaction.description }}</td>
          </tr>
        </tbody>
      </table>
      
      <div *ngIf="filteredTransactions.length === 0" class="alert alert-info">
        No transactions found for the selected period.
      </div>
    </div>
  </div>
</div>